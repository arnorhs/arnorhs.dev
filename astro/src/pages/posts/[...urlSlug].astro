---
import MainLayout from '$layouts/MainLayout.astro'
import PostFull from '$components/PostFull.astro'
import { dateFormat, Post, findPost, getAllPosts } from '$lib'

export async function getStaticPaths () {
  const allPosts = await getAllPosts()

  return allPosts.map((post) => ({
    params: { urlSlug: post.urlSlug },
    props: { permalink: post.permalink }
  }))
}
import { storeImageData } from '@resoc/img-data'

await storeImageData(
  '../../../../resoc/resoc-image-data.json', // Mapping file, as declared in netlify.toml
  'post', // Slug
  {
    // `${templates_dir}/${template}/resoc.manifest.json` should exist,
    // where templates_dir comes from netlify.toml and template is the parameter below
    template: 'default',

    values: {
      title: "Our news",
      color: "rgb(92, 106, 196)"
    }
  }
)

const {
  permalink
} = Astro.props

const post = await findPost(permalink)

---
<MainLayout>
    <PostFull {post} />
</MainLayout>